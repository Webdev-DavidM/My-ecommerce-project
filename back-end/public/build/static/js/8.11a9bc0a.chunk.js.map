{"version":3,"sources":["Pages/ShoppingBasket.module.css","Components/UIelements/CheckoutItem.module.css","Components/UIelements/CheckoutItem.js","Pages/ShoppingBasket.js"],"names":["module","exports","CheckoutItem","state","quantity","error","componentDidMount","props","details","setState","removeItem","id","localStorageKey","deleteItem","localStorage","adjustQuantity","operator","updateBasket","qtyOfSizeInStock","prevState","localStorageItem","JSON","parse","getItem","setItem","stringify","this","name","images","price","size","className","styles","itemcontainer","imagecontainer","src","alt","itemdetails","style","color","priceandquanity","qtybtn1","onClick","amount","qtybtn2","bin","aria-hidden","itemcost","Component","connect","basket","products","dispatch","updateToBasket","deleteItemFromBasket","ShoppingBasket","addBasket","length","Object","keys","map","item","index","itemsFromLocalStorage","undefined","isUserSignedIn","history","push","total","basketTotal","shoppingbasket","buttoncontainer","buttonshopping","disabled","buttoncheckout","token","textAlign","marginRight","Total","product","reduce","itemTotal","addToBasket"],"mappings":"iGACAA,EAAOC,QAAU,CAAC,eAAiB,uCAAuC,eAAiB,uCAAuC,MAAQ,8BAA8B,UAAY,kCAAkC,eAAiB,uCAAuC,gBAAkB,0C,oBCAhSD,EAAOC,QAAU,CAAC,cAAgB,oCAAoC,QAAU,8BAA8B,MAAQ,4BAA4B,eAAiB,qCAAqC,YAAc,kCAAkC,QAAU,8BAA8B,QAAU,8BAA8B,IAAM,0BAA0B,gBAAkB,sCAAsC,OAAS,6BAA6B,KAAO,2BAA2B,OAAS,6BAA6B,SAAW,iC,8ICanhBC,E,4MACJC,MAAQ,CACNC,SAAU,KACVC,MAAO,I,EAGTC,kBAAoB,WAAO,IACnBF,EAAa,EAAKG,MAAMC,QAAxBJ,SACN,EAAKK,SAAS,CAAEL,c,EAGlBM,WAAa,SAACC,EAAIC,GAChB,EAAKL,MAAMM,WAAWF,GACtBG,aAAaJ,WAAb,UAA2BE,K,EAG7BG,eAAiB,SAACC,GAAc,IACxBC,EAAiB,EAAKV,MAAtBU,aACAC,EAAqB,EAAKX,MAAMC,QAAhCU,iBAFuB,EAGC,EAAKX,MAA7BI,EAHuB,EAGvBA,GAAIC,EAHmB,EAGnBA,gBACV,GAAiB,MAAbI,EACF,GAA4B,IAAxB,EAAKb,MAAMC,SAAgB,CAC7Ba,EAAaN,EAAI,EAAKR,MAAMC,SAAW,GACvC,EAAKK,UAAS,SAACU,GAAD,MAAgB,CAC5Bf,SAAUe,EAAUf,SAAW,EAC/BC,MAAO,OAET,IAAIe,EAAmBC,KAAKC,MAC1BR,aAAaS,QAAb,UAAwBX,KAE1BQ,EAAgB,SAAe,EAAKjB,MAAMC,SAAW,EACrDU,aAAaU,QAAb,UACKZ,GACHS,KAAKI,UAAUL,SAGjB,EAAKX,SAAS,CAAEJ,MAAO,sBAG3B,GAAiB,MAAbW,EACF,GAAI,EAAKb,MAAMC,SAAWc,EAAkB,CAC1CD,EAAaN,EAAI,EAAKR,MAAMC,SAAW,GACvC,EAAKK,UAAS,SAACU,GAAD,MAAgB,CAC5Bf,SAAUe,EAAUf,SAAW,EAC/BC,MAAO,OAET,IAAIe,EAAmBC,KAAKC,MAC1BR,aAAaS,QAAb,UAAwBX,KAE1BQ,EAAgB,SAAe,EAAKjB,MAAMC,SAAW,EACrDU,aAAaU,QAAb,UACKZ,GACHS,KAAKI,UAAUL,SAGjB,EAAKX,SAAS,CACZJ,MAAM,gC,uDAMJ,IAAD,SACiCqB,KAAKnB,MAAMC,QAA7CmB,EADC,EACDA,KAAMC,EADL,EACKA,OAAQC,EADb,EACaA,MAAOC,EADpB,EACoBA,KAAMnB,EAD1B,EAC0BA,GAE3BC,EAAoBc,KAAKnB,MAAzBK,gBAEN,OACE,sBAAKmB,UAAWC,IAAOC,cAAvB,UACE,sBAAKF,UAAWC,IAAOxB,QAAvB,UACE,qBAAKuB,UAAWC,IAAOE,eAAvB,SACE,qBACEC,IAAG,0DAAqDP,EAAO,IAC/DQ,IAAI,OAGR,sBAAKL,UAAWC,IAAOK,YAAvB,UACE,+BAAOV,IACP,uBACA,yCAAYG,KACZ,uBACA,uBAAMQ,MAAO,CAAEC,MAAO,WAAtB,iBAAqCV,KACrC,6BAGJ,oCACA,sBAAKE,UAAWC,IAAOQ,gBAAvB,UACE,gCACG,IACD,wBACET,UAAWC,IAAOS,QAClBC,QAAS,kBAAM,EAAK3B,eAAe,MAFrC,eAKA,sBAAMuB,MAAO,CAAEC,MAAO,WAAaR,UAAWC,IAAOW,OAArD,SACGjB,KAAKvB,MAAMC,WAEd,wBACE2B,UAAWC,IAAOY,QAClBF,QAAS,kBAAM,EAAK3B,eAAe,MAFrC,kBAMF,wBACEgB,UAAWC,IAAOa,IAClBH,QAAS,kBAAM,EAAKhC,WAAWC,EAAIC,IAFrC,SAGE,mBAAGmB,UAAU,cAAce,cAAY,WAGzC,qBAAIf,UAAWC,IAAOe,SAAUT,MAAO,CAAEC,MAAO,WAAhD,wBACWV,EAAQH,KAAKvB,MAAMC,eAGhC,qBAAK2B,UAAWC,IAAO3B,MAAvB,SACGqB,KAAKvB,MAAME,OAAS,+BAAOqB,KAAKvB,MAAME,iB,GAlHtB2C,aAoIZC,eAXS,SAAC9C,GACvB,MAAO,CAAE+C,OAAQ/C,EAAMgD,SAASD,WAGP,SAACE,GAC1B,MAAO,CACLnC,aAAc,SAACN,EAAIP,GAAL,OAAkBgD,EAASC,YAAe1C,EAAIP,KAC5DS,WAAY,SAACF,GAAD,OAAQyC,EAASE,YAAqB3C,QAIvCsC,CAA6C/C,GCjItDqD,E,4MACJpD,MAAQ,CACNE,MAAO,I,EAGTC,kBAAoB,WAAO,IAAD,EACI,EAAKC,MAA3B2C,EADkB,EAClBA,OAAQM,EADU,EACVA,UAGQ,IAAlBN,EAAOO,SACeC,OAAOC,KAAK7C,cAClB8C,KAAI,SAACC,GACrB,MAAgB,aAATA,GAAuB/C,aAAaJ,WAAb,UAA2BmD,OAE3DX,EAAOU,KAAI,SAACC,EAAMC,GAChB,OAAOhD,aAAaU,QAAb,cAA4BsC,GAASzC,KAAKI,UAAUoC,QAM/D,IACIE,EADoBL,OAAOC,KAAK7C,cACU8C,KAAI,SAACC,GACjD,OAAOxC,KAAKC,MAAMR,aAAaS,QAAb,UAAwBsC,QAGtB,IAAlBX,EAAOO,QAAgBM,GAGzBA,EAAsBH,KAAI,SAACC,GACzB,YAA6BG,IAAtBH,EAAI,WAA+BL,EAAUK,O,EAI1DI,eAAiB,WACH5C,KAAKC,MAAMR,aAAaS,QAAQ,aAI1C,EAAKhB,MAAM2D,QAAQC,KAAK,aAFxB,EAAK1D,SAAS,CAAEJ,MAAO,gD,uDAKjB,IAAD,SACuBqB,KAAKnB,MAA7B2C,EADC,EACDA,OAEFkB,GAAQC,EAHL,EACOA,eAId,OACE,sBAAKtC,UAAWC,IAAOsC,eAAvB,UACE,sDACsB,KAArB5C,KAAKvB,MAAME,OACV,qBAAK0B,UAAWC,IAAO3B,MAAvB,SAA+BqB,KAAKvB,MAAME,QAE5C,sBAAK0B,UAAWC,IAAOuC,gBAAvB,UACG,IACD,wBACExC,UAAWC,IAAOwC,eAClB9B,QAAS,kBAAM,EAAKnC,MAAM2D,QAAQC,KAAK,MAFzC,+BAKA,wBACEM,SAA4B,IAAlBvB,EAAOO,OACjBf,QAAS,kBAAM,EAAKuB,kBACpBlC,UAAWC,IAAO0C,eAHpB,iCAMA,0BAEDxB,EAAOU,KAAI,SAACC,EAAMC,GACjB,OACGD,EAAKc,OACJ,gCACE,cAAC,EAAD,CACEnE,QAASqD,EAETlD,GAAImD,EACJlD,gBAAe,cAASkD,IAFnBA,GAIP,yBAPQA,MAYG,IAAlBZ,EAAOO,QACN,oBAAInB,MAAO,CAAEC,MAAO,WAApB,2BAEF,qBACED,MAAO,CAAEsC,UAAW,QAASC,YAAa,OAAQtC,MAAO,WAD3D,8BAEiB6B,EAAMU,SAEvB,wBACEL,SAA4B,IAAlBvB,EAAOO,OACjB1B,UAAWC,IAAO0C,eAClBhC,QAAS,kBAAM,EAAKuB,kBAHtB,iCAMsB,KAArBvC,KAAKvB,MAAME,OACV,qBAAK0B,UAAWC,IAAO3B,MAAvB,SAA+BqB,KAAKvB,MAAME,e,GAjGvB2C,aAkIdC,uBA1BS,SAAC9C,GACvB,MAAO,CACL+C,OAAQ/C,EAAMgD,SAASD,OACvBmB,YAAa,WACX,IAAIS,EAAQ,EAWZ,OAVqC,IAAjC3E,EAAMgD,SAASD,OAAOO,SACxBqB,EAAQ3E,EAAMgD,SAASD,OACpBU,KAAI,SAACmB,GACJ,OAAOA,EAAQlD,MAAQkD,EAAQ3E,YAEhC4E,QAAO,SAACZ,EAAOa,GACd,OAAOb,EAAQa,MAId,CAAEH,cAKY,SAAC1B,GAC1B,MAAO,CACLI,UAAW,SAACK,GAAD,OAAUT,EAAS8B,YAAYrB,QAI/BZ,CAA6CM","file":"static/js/8.11a9bc0a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"shoppingbasket\":\"ShoppingBasket_shoppingbasket__3hPIk\",\"buttoncheckout\":\"ShoppingBasket_buttoncheckout__1THlB\",\"error\":\"ShoppingBasket_error__PUUnt\",\"gobackbtn\":\"ShoppingBasket_gobackbtn__3CoM3\",\"buttonshopping\":\"ShoppingBasket_buttonshopping__4IUxQ\",\"buttoncontainer\":\"ShoppingBasket_buttoncontainer__4kodM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"itemcontainer\":\"CheckoutItem_itemcontainer__1VqFn\",\"details\":\"CheckoutItem_details__2NmzK\",\"error\":\"CheckoutItem_error__qhsIS\",\"imagecontainer\":\"CheckoutItem_imagecontainer__3MEKK\",\"itemdetails\":\"CheckoutItem_itemdetails__2eEq2\",\"qtybtn1\":\"CheckoutItem_qtybtn1__3bs4s\",\"qtybtn2\":\"CheckoutItem_qtybtn2__1jllo\",\"bin\":\"CheckoutItem_bin__3zcE1\",\"priceandquanity\":\"CheckoutItem_priceandquanity__BpTRf\",\"amount\":\"CheckoutItem_amount__33tZf\",\"rule\":\"CheckoutItem_rule__3l5bu\",\"qtybtn\":\"CheckoutItem_qtybtn__3PoBx\",\"itemcost\":\"CheckoutItem_itemcost__Ct5b3\"};","/* NPM packages */\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\n/* CSS */\nimport styles from './CheckoutItem.module.css';\n\n/* Action creators */\n\nimport {\n  updateToBasket,\n  deleteItemFromBasket,\n} from '../../Actions/products.js';\n\nclass CheckoutItem extends Component {\n  state = {\n    quantity: null,\n    error: '',\n  };\n\n  componentDidMount = () => {\n    let { quantity } = this.props.details;\n    this.setState({ quantity });\n  };\n\n  removeItem = (id, localStorageKey) => {\n    this.props.deleteItem(id);\n    localStorage.removeItem(`${localStorageKey}`);\n  };\n\n  adjustQuantity = (operator) => {\n    let { updateBasket } = this.props;\n    let { qtyOfSizeInStock } = this.props.details;\n    let { id, localStorageKey } = this.props;\n    if (operator === '-') {\n      if (this.state.quantity !== 0) {\n        updateBasket(id, this.state.quantity - 1);\n        this.setState((prevState) => ({\n          quantity: prevState.quantity - 1,\n          error: '',\n        }));\n        let localStorageItem = JSON.parse(\n          localStorage.getItem(`${localStorageKey}`)\n        );\n        localStorageItem['quantity'] = this.state.quantity - 1;\n        localStorage.setItem(\n          `${localStorageKey}`,\n          JSON.stringify(localStorageItem)\n        );\n      } else {\n        this.setState({ error: 'Nothing in basket' });\n      }\n    }\n    if (operator === '+') {\n      if (this.state.quantity < qtyOfSizeInStock) {\n        updateBasket(id, this.state.quantity + 1);\n        this.setState((prevState) => ({\n          quantity: prevState.quantity + 1,\n          error: '',\n        }));\n        let localStorageItem = JSON.parse(\n          localStorage.getItem(`${localStorageKey}`)\n        );\n        localStorageItem['quantity'] = this.state.quantity + 1;\n        localStorage.setItem(\n          `${localStorageKey}`,\n          JSON.stringify(localStorageItem)\n        );\n      } else {\n        this.setState({\n          error: `Maximum quantity available`,\n        });\n      }\n    }\n  };\n\n  render() {\n    let { name, images, price, size, id } = this.props.details;\n\n    let { localStorageKey } = this.props;\n\n    return (\n      <div className={styles.itemcontainer}>\n        <div className={styles.details}>\n          <div className={styles.imagecontainer}>\n            <img\n              src={`https://my-ecommerce-site-fitness.herokuapp.com/${images[0]}`}\n              alt=''\n            />\n          </div>\n          <div className={styles.itemdetails}>\n            <span>{name}</span>\n            <br />\n            <span>Size:{size}</span>\n            <br />\n            <span style={{ color: '#3498db' }}>Â£{price}</span>\n            <br />\n          </div>\n        </div>\n        <div> </div>\n        <div className={styles.priceandquanity}>\n          <div>\n            {' '}\n            <button\n              className={styles.qtybtn1}\n              onClick={() => this.adjustQuantity('-')}>\n              -\n            </button>\n            <span style={{ color: '#27ae60' }} className={styles.amount}>\n              {this.state.quantity}\n            </span>\n            <button\n              className={styles.qtybtn2}\n              onClick={() => this.adjustQuantity('+')}>\n              +\n            </button>\n          </div>\n          <button\n            className={styles.bin}\n            onClick={() => this.removeItem(id, localStorageKey)}>\n            <i className='fa fa-trash' aria-hidden='true'></i>\n          </button>\n\n          <h2 className={styles.itemcost} style={{ color: '#3498db' }}>\n            Total: Â£{price * this.state.quantity}\n          </h2>\n        </div>\n        <div className={styles.error}>\n          {this.state.error && <span>{this.state.error}</span>}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return { basket: state.products.basket };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updateBasket: (id, quantity) => dispatch(updateToBasket(id, quantity)),\n    deleteItem: (id) => dispatch(deleteItemFromBasket(id)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckoutItem);\n","/* NPM packages */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\n/* CSS */\n\nimport styles from './ShoppingBasket.module.css';\n\n/* Components */\n\nimport CheckoutItem from '../Components/UIelements/CheckoutItem';\n\n/* Action creators */\n\nimport { addToBasket } from '../Actions/products.js';\n\nclass ShoppingBasket extends Component {\n  state = {\n    error: '',\n  };\n\n  componentDidMount = () => {\n    let { basket, addBasket } = this.props;\n    // here we check if there is something in the basket which means the user has come\n    // from the product screen, if so then add to local storage\n    if (basket.length !== 0) {\n      let localStorageItems = Object.keys(localStorage);\n      localStorageItems.map((item) => {\n        return item !== 'userInfo' && localStorage.removeItem(`${item}`);\n      });\n      basket.map((item, index) => {\n        return localStorage.setItem(`item${index}`, JSON.stringify(item));\n      });\n    }\n\n    // here we check if the page has been refreshed and there is nothing in the basket, if there\n    // is an item in local storage then dispatch it to be added to basket in redux so it can populate this screen\n    let localStorageItems = Object.keys(localStorage);\n    let itemsFromLocalStorage = localStorageItems.map((item) => {\n      return JSON.parse(localStorage.getItem(`${item}`));\n    });\n\n    if (basket.length === 0 && itemsFromLocalStorage)\n      // Here I will store the basket in local storage and reload if the user refreshes the page,\n      // I am mapping over the array and adding each item at a time which is what the reducer is expecting\n      itemsFromLocalStorage.map((item) => {\n        return item['firstName'] === undefined && addBasket(item);\n      });\n  };\n\n  isUserSignedIn = () => {\n    let token = JSON.parse(localStorage.getItem('userInfo'));\n    if (!token) {\n      this.setState({ error: 'Please sign in or create an account to buy' });\n    } else {\n      this.props.history.push('check-out');\n    }\n  };\n  render() {\n    let { basket, basketTotal } = this.props;\n\n    let total = basketTotal();\n\n    return (\n      <div className={styles.shoppingbasket}>\n        <h2>Your Shopping Basket</h2>\n        {this.state.error !== '' && (\n          <div className={styles.error}>{this.state.error}</div>\n        )}\n        <div className={styles.buttoncontainer}>\n          {' '}\n          <button\n            className={styles.buttonshopping}\n            onClick={() => this.props.history.push('/')}>\n            Continue Shopping\n          </button>\n          <button\n            disabled={basket.length === 0}\n            onClick={() => this.isUserSignedIn()}\n            className={styles.buttoncheckout}>\n            Proceed to checkout\n          </button>\n          <br />\n        </div>\n        {basket.map((item, index) => {\n          return (\n            !item.token && (\n              <div key={index}>\n                <CheckoutItem\n                  details={item}\n                  key={index}\n                  id={index}\n                  localStorageKey={`item${index}`}\n                />\n                <hr></hr>\n              </div>\n            )\n          );\n        })}\n        {basket.length === 0 && (\n          <h2 style={{ color: '#e74c3c' }}>Basket empty </h2>\n        )}\n        <h1\n          style={{ textAlign: 'right', marginRight: '4rem', color: '#27ae60' }}>\n          Total price: Â£{total.Total}\n        </h1>\n        <button\n          disabled={basket.length === 0}\n          className={styles.buttoncheckout}\n          onClick={() => this.isUserSignedIn()}>\n          Proceed to checkout\n        </button>\n        {this.state.error !== '' && (\n          <div className={styles.error}>{this.state.error}</div>\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    basket: state.products.basket,\n    basketTotal: () => {\n      let Total = 0;\n      if (state.products.basket.length !== 0) {\n        Total = state.products.basket\n          .map((product) => {\n            return product.price * product.quantity;\n          })\n          .reduce((total, itemTotal) => {\n            return total + itemTotal;\n          });\n      }\n\n      return { Total };\n    },\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    addBasket: (item) => dispatch(addToBasket(item)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingBasket);\n"],"sourceRoot":""}